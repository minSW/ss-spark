<!-- 
/ss-spark/week{#}/minsw/README.md

# Week {#}

## What I've Learned 🙂

## On/Offline
> 2021.00.00

-->


# Week 7


## What I've Learned 🙂
[ Part 3 저수준 API ]

- CHAPTER 14 분산형 공유 변수
  - [블로그](https://minsw.github.io/2021/03/20/Spark-The-Definitive-Guide-14%EC%9E%A5/)


## Online (WhaleON)
> 2021.03.22

<img width="300" alt="week67" src="https://user-images.githubusercontent.com/26691216/113145764-d05e6280-9269-11eb-8df5-431684c3363d.PNG">

- minsw
  - "브로드캐스트 변수에 작은 크기의 딕셔너리(dictionary) 타입 사용 시 부하 크게 발생 X" (=> ?)
  - 직렬화/역질렬화해서 보낼때 과정이, 작은 크기면 부담이 되지않는다
    - 크기가 크면 먜번 직렬화/역직렬화가 크고..
  - 브로드캐스트 변수 사용 이유 => 스파크 잡이 여러 스테이지로 구성되어있고, 이게 태스크라는 작은단위로 또 쪼개서 구성되어있다
    - 스테이지 : 드라이버노드에서 익스큐터에 잡을 분배하는 단위
    - 드라이버노드에 공유변수가있으면 이 공유 변수를 태스크에서 사용하려면, 매 스테이지마다 드라이버 -> 익스큐터로 공유변수를 전달해줘야함
    - 브로드캐스트 사용하면 => 전체스테이지에서 한번만 전달하면 재사용할 수 있다.
    - 공유변수를 태스크마다 네트워크를 태워야하고, 그러니까 직렬화/역질렬화 해야하니까
  - 뭔가 해석이 좀 어색한거같기도하고? => **원문 한번 확인 해볼 것**
  - myeongki : "애초에 브로드캐스트 변수도 조심해서 써야한다." 는 의미가 아닐까
    - 즉, 브로드캐스트 자체의 오버헤드도 주의하라
    - 애초에 직렬화자체가 크긴 큰거 같은데.. => 일반적으로 큰 데이터 사용시에 부하가 커진다.
  - jin5335 : 오역에 한표. 문맥이 좀 이상하다
- jin5335
  - 현업에서는 써본적?
    - pyspark 를 쓰므로 UDF (성능이 나빠진다...), Dataset X
    - => 결국 공유변수를 거의 안쓴다. 
  - 어떤잡이 돌아갈때 - 데이터를 전달하는 경우가 있지않을까 (직렬화/역직렬화 그대로?)
    - DataFrame을 쓰니까.....
    - 공유 변수를 쓰면 쓰긴써야할듯한다. (불변성 & 공유변수에 좋을 듯)
  - 윗단에서는 (DataFrame) 사실 공유 변수를 잘 안쓰니까 + 코드를 쓸때부터 안쓰려고 노력
    - DataFrame 자체에있는 값만 쓰려고하니까. 
    - 상수가 필요하면 새 DF를 만든다...하하...
  - 여러 스테이지에 걸쳐 누적적으로 불변성 객체에 접근해야할때
- myeongki
  - 안드로이드에서도 비슷한게 있다
    - 화면단에서 화면으로 넘길때는 직렬화 필요
    - 싱글톤, 스테틱하게 등 선언하게된 변수를 사용하면 직렬화 사용 없이 가능
      - 안드로이드에서 - 데이터를 전달하고자할때 ) 직/역직렬화 과정을 굳이안쓰고 이런식으로도 쓸수있다 (짜치게)
      - 어라? 왜 야매냐? -> 원래 불변성으로 쓰는 애가 아니니까
      - 차곡차곡 패킹이 맞다
- 추후 스터디 방향성?
  - 스파크 & 배치 잡
  - 파이썬으로 합니까? => 언어 규제 No (Scala, Python 자유)
  - (일단은...) 지금 구상하고있는 모습들을 주제로 저장
    - 데이터를 처리하는 과정 자체를...!