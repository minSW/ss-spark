# 8주차 정리

## 15장
### 스파크 드라이버
- 운전자 역할을 하는 프로세스
- 실행 제어, 클러스터 모든 상태 정보 유지
### 스파크 익스큐터
- 스파크 드라이버가 할당한 태스크를 수행하는 프로세스
- 모든 스파크 어플리케이션은 개별 익스큐터 프로세스를 사용
### 클러스터 매니져
- 스파크 드라이버와 익스큐터를 띄우기 위한 머신
## 실행 모드
### 클러스터 모드
- JAR 또는 스크립트를 클러스터 매니저에 전달 -> 워커노드에 드라이버와 익스큐터 프로세스 실행
### 클라이언트 모드
- 클라이언트 머신은 드라이버 프로세스를 유지하며 클러스터 매니저는 익스큐터 프로세스를 유지
### 로컬모드
- 모든 스파크 애플리케이션은 단일 머신에서 실행됨(병렬 처리를 단일 머신의 스레드 사용 -> 테스트용으로 사용)
## 라이프사이클
- 애플리케이션 제출 -> 클러스터 드라이버 노드에 자원 요청 -> 클러스터 노드 중 하나에 드라이버 프로세스 실행. -> 제출한 클라이언트 프로세스 종료 -> 클러스터에서 실행 -> 클러스터 매니저는 익스큐터 프로세스를 시작하고 결과를 응답받아 익스큐터의 위치와 관련 정보를 드라이버 프로세스로 전송함. -> 스파크 클러스터 완성 -> 드라이버와 워커는 코드를 실행하고 데이터를 이동하는 과정에서 서로 통신 -> 드라이버는 각 워커에 태스크 할당 -> 워커는 태스크 성공 여부를 드라이버에 전송 -> 종료 -> 드라이버 상태가 성공/실패 -> 클러스터 매니저는 드라이버가 속한 스파크 클러스터의 모든 익스큐터 종료 -> 스파크 애플리케이션의 성공 여부를 클러스터 매니저에 요청해 확인할 수 있다.

## 스파크 내부 라이프 사이클
- 스파크 애플리케이션은 하나 이상의 스파크 잡으로 구성 -> 스레드를 사용해 여러 액션을 병렬로 수행하는 경우가 아니라면 스파크 잡은 차례대로 실행

- 기본으로 설정된 파티션 수를 잘 조절하면 최적화 할 수 있다.

- 테스크란: 단일 익스큐터에서 실행할 데이터의 블록과 다수의 트랜스포메이션 조합으로 볼 수 있다. -> 테스크는 데이터 단위(파티션)에 적용되는 연산 단위를 의미

- 파이프라이닝 노드간의 데이터 이동 없이 각 노드가 데이터를 직접 공급할 수 있는 연산만 모아 태스크의 단일 스테이지로 만듬.